

<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Demo: Progammatic Layout</title>
  <link rel="stylesheet" href="https://dojotoolkit.org/documentation/tutorials/1.10/_common/demo.css" media="screen">
  <link rel="stylesheet" href="https://dojotoolkit.org/documentation/tutorials/1.10/dijit_layout/demo/style.css" media="screen">
  <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css" media="screen">
  <script>
    require(["dojo/parser", "dojo/store/Memory", "dijit/tree/ObjectStoreModel", "dijit/Tree"]);
  </script>
  <script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"></script>
  <script>dojoConfig = {parseOnLoad: true}</script>
</head>
<!--<body class="claro">-->
<!--<div id="appLayout" class="demoLayout"></div>-->
<!--<div id="startContent">-->
  <!--<h4>Starting Content</h4>-->
  <!--<button id="createTabBtn">Add another tab</button>-->
<!--</div>-->
<body class="claro">
<div id="appLayout" class="demoLayout"></div>


<!-- Create store with inlined data.
    For larger data sets should use dojo.store.JsonRest etc. instead of dojo.store.Memory. -->
<script>
dojo.require("dijit.layout.BorderContainer");
dojo.require("dijit.layout.TabContainer");
dojo.require("dijit.layout.ContentPane");

dojo.require("dojo.data.ItemFileWriteStore");
dojo.require("dijit.Tree");

dojo.ready(function(){
    var appLayout = new dijit.layout.BorderContainer({
            design: "headline"
        }, dojo.byId("appLayout"));

    var contentTabs = new dijit.layout.TabContainer({
        region: "center",
        id: "contentTabs",
        tabPosition: "bottom",
        "class": "centerPanel",
        href: "contentCenter.html"
    });

    appLayout.addChild(contentTabs);

    var topPane = new dijit.layout.ContentPane({
        region: "top",
        "class": "edgePanel",
        content: "Header content (top)"
    });

    appLayout.addChild(topPane);

    var leftPane = new dijit.layout.ContentPane({
        region:"left",
        id:"leftCol",
        "class":"edgePanel",
        content:"Sidebar content (left)",
        splitter:true
    });

    appLayout.addChild(leftPane);

    var store = new dojo.data.ItemFileWriteStore({
        data:continentData
    });

    var treeModel = new dijit.tree.ForestStoreModel({
        store:store,
        query:{
            "type":"continent"
        },
        rootId:"root",
        rootLabel:"Continents",
        childrenAttrs:["children"]
    });

    var contentTree = new dijit.Tree({
        model:treeModel,
        persist:false,
        showRoot:false,
        getIconClass:function(item, opened){
            console.log('tree getIconClass', item, opened);

            //console.log('tree item type', store.getValue(item, 'type'));
            console.log('tree item type', item.type);
        }
    });

    dojo.connect(contentTree, "onClick", function(item, node, evt){
        console.log('content tree clicked', item, node, evt);
    });

    var tryButton = dojo.create('button',{innerHTML:'try'});
    var paneLayout = new dijit.layout.BorderContainer({design:'headline'});
    paneLayout.addChild(new dijit.layout.ContentPane({region:'top',content:tryButton}));
    paneLayout.addChild(new dijit.layout.ContentPane({region:'center',content:contentTree}));


    var counter = 0;

    function dynamicallyUpdateStoreAndTree() {
        counter++;
        store.newItem({ id: counter, name:('Fake'+counter), type:'continent'});
    }

    function openLeafInTree() {
        //dojo.set(contentTree, "selectedItems", []);
        contentTree.set('paths', [['children', 'AS']]);
    }

    dojo.connect(tryButton, "onclick", function(){
        //dynamicallyUpdateStoreAndTree();
        openLeafInTree();
    });

    var contentPane = new dijit.layout.ContentPane({
        content:paneLayout,
        title:"Group 1"
    });

    //contentPane2.set("content", contentTree);

    var contentPane2 = new dijit.layout.ContentPane({
        content:"Group 2 content",
        title:"Group 2"
    });

    contentTabs.addChild(contentPane);
    contentTabs.addChild(contentPane2);

    dojo.connect(contentTabs, "selectChild", function(child){
        console.log('panel change', child);
     });

    dojo.connect(contentTabs, "_transition", function(selectedChild, deselectedChild){
        console.log('panel transition', selectedChild.title, deselectedChild.title);
    });

    appLayout.startup();
});

var continentData = {
    identifier: 'id',
    label: 'name',
    items: [
            {   id: 'AF',
                name:'Africa',
                type:'continent',
                population:'900 million',
                area: '30,221,532 sq km',
                timezone: '-1 UTC to +4 UTC',
                children:[
                    { _reference:'EG'},
                    {_reference:'KE'},
                    {_reference:'SD'}
                ]
            },
            { id: 'EG', name:'Egypt', type:'country' },
            { id: 'KE', name:'Kenya', type:'country',
                children:[
                    {_reference:'Nairobi'},
                    {_reference:'Mombasa'}
                ]
            },
            { id: 'Nairobi', name:'Nairobi', type:'city' },
            { id: 'Mombasa', name:'Mombasa', type:'city' },
            { id: 'SD', name:'Sudan', type:'country',
                children:{
                    _reference:'Khartoum'
                }
            },
            { id: 'Khartoum', name:'Khartoum', type:'city' },
            { id: 'AS', name:'Asia', type:'continent',
                children:[
                    {_reference:'CN'},
                    {_reference:'IN'},
                    {_reference:'RU'},
                    {_reference:'MN'}
                ]
            },
            { id: 'CN', name:'China', type:'country' },
            { id: 'IN', name:'India', type:'country' },
            { id: 'RU', name:'Russia', type:'country' },
            { id: 'MN', name:'Mongolia', type:'country' },
            { id: 'OC', name:'Oceania', type:'continent', population:'21 million',
                    children:{
                        _reference:'AU'
                    }
            },
            { id: 'AU', name:'Australia', type:'country', population:'21 million'},
            { id: 'EU', name:'Europe', type:'continent',
                    children:[
                        {_reference:'DE'},
                        {_reference:'FR'},
                        {_reference:'ES'},
                        {_reference:'IT'}
                    ]
            },
            { id: 'DE', name:'Germany', type:'country' },
            { id: 'FR', name:'France', type:'country' },
            { id: 'ES', name:'Spain', type:'country' },
            { id: 'IT', name:'Italy', type:'country' },
            { id: 'NA', name:'North America', type:'continent',
                children:[
                    {_reference:'MX'},
                    {_reference:'CA'},
                    {_reference:'US'}
                ]
            },
            { id: 'MX', name:'Mexico', type:'country',  population:'108 million', area:'1,972,550 sq km',
                children:[
                    {_reference:'Mexico City'},
                    {_reference:'Guadalajara'}
                ]
            },
            { id: 'Mexico City', name:'Mexico City', type:'city', population:'19 million', timezone:'-6 UTC'},
            { id: 'Guadalajara', name:'Guadalajara', type:'city', population:'4 million', timezone:'-6 UTC' },
            { id: 'CA', name:'Canada', type:'country',  population:'33 million', area:'9,984,670 sq km',
                children:[
                    {_reference:'Ottawa'},
                    {_reference:'Toronto'}
                ]
            },
            { id: 'Ottawa', name:'Ottawa', type:'city', population:'0.9 million', timezone:'-5 UTC'},
            { id: 'Toronto', name:'Toronto', type:'city', population:'2.5 million', timezone:'-5 UTC' },
            { id: 'US', name:'United States of America', type:'country' },
            { id: 'SA', name:'South America', type:'continent',
                children:[
                    {_reference:'BR'},
                    {_reference:'AR'}
                ]
            },
            { id: 'BR', name:'Brazil', type:'country', population:'186 million' },
            { id: 'AR', name:'Argentina', type:'country', population:'40 million' }
]};

    </script>

    <!--// Create test store, adding the getChildren() method required by ObjectStoreModel-->
   <!---->
     <!---->
<!--//  require(["dojo/on", "dojo/dom", "dijit/registry", "dijit/layout/BorderContainer", "dijit/layout/TabContainer", "dijit/layout/ContentPane", "dojo/domReady!"],-->
<!--//          function(on, dom, registry, BorderContainer, TabContainer, ContentPane){-->
<!--//            function addTab(name) {-->
<!--//              var pane = new ContentPane({-->
<!--//                title: name,-->
<!--//                content: "<h4>" + name + "</h4>"-->
<!--//              });-->
<!--//              registry.byId("contentTabs").addChild(pane);-->
<!--//            }-->
<!--//-->
<!--//            // create the BorderContainer and attach it to our appLayout div-->
<!--//            var appLayout = new BorderContainer({-->
<!--//              design: "headline"-->
<!--//            }, "appLayout");-->
<!--//-->
<!--//-->
<!--//            // create the TabContainer-->
<!--//            var contentTabs = new TabContainer({-->
<!--//              region: "center",-->
<!--//              id: "contentTabs",-->
<!--//              tabPosition: "bottom",-->
<!--//              "class": "centerPanel",-->
<!--//              href: "contentCenter.html"-->
<!--//            });-->
<!--//-->
<!--//            // add the TabContainer as a child of the BorderContainer-->
<!--//            appLayout.addChild( contentTabs );-->
<!--//-->
<!--//            // create and add the BorderContainer edge regions-->
<!--//            appLayout.addChild(-->
<!--//                    new ContentPane({-->
<!--//                      region: "top",-->
<!--//                      "class": "edgePanel",-->
<!--//                      content: "Header content (top)"-->
<!--//                    })-->
<!--//            );-->
<!--//            appLayout.addChild(-->
<!--//                    new ContentPane({-->
<!--//                      region: "left",-->
<!--//                      id: "leftCol", "class": "edgePanel",-->
<!--//                      content: "Sidebar content (left)",-->
<!--//                      splitter: true-->
<!--//                    })-->
<!--//            );-->
<!--//-->
<!--//            // Add initial content to the TabContainer-->
<!--//            contentTabs.addChild(-->
<!--//                    new ContentPane({-->
<!--//                      title: "Start"-->
<!--//                    }, "startContent")-->
<!--//            );-->
<!--//-->
<!--//            var tabCounter = 1;-->
<!--//            on(dom.byId("createTabBtn"), "click", function(evt){-->
<!--//              addTab("Tab " + (++tabCounter));-->
<!--//            });-->
<!--//-->
<!--//            // start up and do layout-->
<!--//            appLayout.startup();-->
<!--//          });-->

<!--</body>-->
</html>
